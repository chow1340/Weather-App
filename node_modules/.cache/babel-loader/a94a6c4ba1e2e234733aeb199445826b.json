{"ast":null,"code":"function Skycons() {\n  (function (global) {\n    \"use strict\";\n    /* Set up a RequestAnimationFrame shim so we can animate efficiently FOR\n     * GREAT JUSTICE. */\n\n    var requestInterval, cancelInterval;\n\n    (function () {\n      var raf = global.requestAnimationFrame || global.webkitRequestAnimationFrame || global.mozRequestAnimationFrame || global.oRequestAnimationFrame || global.msRequestAnimationFrame,\n          caf = global.cancelAnimationFrame || global.webkitCancelAnimationFrame || global.mozCancelAnimationFrame || global.oCancelAnimationFrame || global.msCancelAnimationFrame;\n\n      if (raf && caf) {\n        requestInterval = function (fn) {\n          var handle = {\n            value: null\n          };\n\n          function loop() {\n            handle.value = raf(loop);\n            fn();\n          }\n\n          loop();\n          return handle;\n        };\n\n        cancelInterval = function (handle) {\n          caf(handle.value);\n        };\n      } else {\n        requestInterval = setInterval;\n        cancelInterval = clearInterval;\n      }\n    })();\n    /* Catmull-rom spline stuffs. */\n\n    /*\n    function upsample(n, spline) {\n      var polyline = [],\n          len = spline.length,\n          bx  = spline[0],\n          by  = spline[1],\n          cx  = spline[2],\n          cy  = spline[3],\n          dx  = spline[4],\n          dy  = spline[5],\n          i, j, ax, ay, px, qx, rx, sx, py, qy, ry, sy, t;\n       for(i = 6; i !== spline.length; i += 2) {\n        ax = bx;\n        bx = cx;\n        cx = dx;\n        dx = spline[i    ];\n        px = -0.5 * ax + 1.5 * bx - 1.5 * cx + 0.5 * dx;\n        qx =        ax - 2.5 * bx + 2.0 * cx - 0.5 * dx;\n        rx = -0.5 * ax            + 0.5 * cx           ;\n        sx =                   bx                      ;\n         ay = by;\n        by = cy;\n        cy = dy;\n        dy = spline[i + 1];\n        py = -0.5 * ay + 1.5 * by - 1.5 * cy + 0.5 * dy;\n        qy =        ay - 2.5 * by + 2.0 * cy - 0.5 * dy;\n        ry = -0.5 * ay            + 0.5 * cy           ;\n        sy =                   by                      ;\n         for(j = 0; j !== n; ++j) {\n          t = j / n;\n           polyline.push(\n            ((px * t + qx) * t + rx) * t + sx,\n            ((py * t + qy) * t + ry) * t + sy\n          );\n        }\n      }\n       polyline.push(\n        px + qx + rx + sx,\n        py + qy + ry + sy\n      );\n       return polyline;\n    }\n     function downsample(n, polyline) {\n      var len = 0,\n          i, dx, dy;\n       for(i = 2; i !== polyline.length; i += 2) {\n        dx = polyline[i    ] - polyline[i - 2];\n        dy = polyline[i + 1] - polyline[i - 1];\n        len += Math.sqrt(dx * dx + dy * dy);\n      }\n       len /= n;\n       var small = [],\n          target = len,\n          min = 0,\n          max, t;\n       small.push(polyline[0], polyline[1]);\n       for(i = 2; i !== polyline.length; i += 2) {\n        dx = polyline[i    ] - polyline[i - 2];\n        dy = polyline[i + 1] - polyline[i - 1];\n        max = min + Math.sqrt(dx * dx + dy * dy);\n         if(max > target) {\n          t = (target - min) / (max - min);\n           small.push(\n            polyline[i - 2] + dx * t,\n            polyline[i - 1] + dy * t\n          );\n           target += len;\n        }\n         min = max;\n      }\n       small.push(polyline[polyline.length - 2], polyline[polyline.length - 1]);\n       return small;\n    }\n    */\n\n    /* Define skycon things. */\n\n    /* FIXME: I'm *really really* sorry that this code is so gross. Really, I am.\n     * I'll try to clean it up eventually! Promise! */\n\n\n    var KEYFRAME = 500,\n        STROKE = 0.08,\n        TAU = 2.0 * Math.PI,\n        TWO_OVER_SQRT_2 = 2.0 / Math.sqrt(2);\n\n    function circle(ctx, x, y, r) {\n      ctx.beginPath();\n      ctx.arc(x, y, r, 0, TAU, false);\n      ctx.fill();\n    }\n\n    function line(ctx, ax, ay, bx, by) {\n      ctx.beginPath();\n      ctx.moveTo(ax, ay);\n      ctx.lineTo(bx, by);\n      ctx.stroke();\n    }\n\n    function puff(ctx, t, cx, cy, rx, ry, rmin, rmax) {\n      var c = Math.cos(t * TAU),\n          s = Math.sin(t * TAU);\n      rmax -= rmin;\n      circle(ctx, cx - s * rx, cy + c * ry + rmax * 0.5, rmin + (1 - c * 0.5) * rmax);\n    }\n\n    function puffs(ctx, t, cx, cy, rx, ry, rmin, rmax) {\n      var i;\n\n      for (i = 5; i--;) puff(ctx, t + i / 5, cx, cy, rx, ry, rmin, rmax);\n    }\n\n    function cloud(ctx, t, cx, cy, cw, s, color) {\n      t /= 30000;\n      var a = cw * 0.21,\n          b = cw * 0.12,\n          c = cw * 0.24,\n          d = cw * 0.28;\n      ctx.fillStyle = color;\n      puffs(ctx, t, cx, cy, a, b, c, d);\n      ctx.globalCompositeOperation = 'destination-out';\n      puffs(ctx, t, cx, cy, a, b, c - s, d - s);\n      ctx.globalCompositeOperation = 'source-over';\n    }\n\n    function sun(ctx, t, cx, cy, cw, s, color) {\n      t /= 120000;\n      var a = cw * 0.25 - s * 0.5,\n          b = cw * 0.32 + s * 0.5,\n          c = cw * 0.50 - s * 0.5,\n          i,\n          p,\n          cos,\n          sin;\n      ctx.strokeStyle = color;\n      ctx.lineWidth = s;\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n      ctx.beginPath();\n      ctx.arc(cx, cy, a, 0, TAU, false);\n      ctx.stroke();\n\n      for (i = 8; i--;) {\n        p = (t + i / 8) * TAU;\n        cos = Math.cos(p);\n        sin = Math.sin(p);\n        line(ctx, cx + cos * b, cy + sin * b, cx + cos * c, cy + sin * c);\n      }\n    }\n\n    function moon(ctx, t, cx, cy, cw, s, color) {\n      t /= 15000;\n      var a = cw * 0.29 - s * 0.5,\n          b = cw * 0.05,\n          c = Math.cos(t * TAU),\n          p = c * TAU / -16;\n      ctx.strokeStyle = color;\n      ctx.lineWidth = s;\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n      cx += c * b;\n      ctx.beginPath();\n      ctx.arc(cx, cy, a, p + TAU / 8, p + TAU * 7 / 8, false);\n      ctx.arc(cx + Math.cos(p) * a * TWO_OVER_SQRT_2, cy + Math.sin(p) * a * TWO_OVER_SQRT_2, a, p + TAU * 5 / 8, p + TAU * 3 / 8, true);\n      ctx.closePath();\n      ctx.stroke();\n    }\n\n    function rain(ctx, t, cx, cy, cw, s, color) {\n      t /= 1350;\n      var a = cw * 0.16,\n          b = TAU * 11 / 12,\n          c = TAU * 7 / 12,\n          i,\n          p,\n          x,\n          y;\n      ctx.fillStyle = color;\n\n      for (i = 4; i--;) {\n        p = (t + i / 4) % 1;\n        x = cx + (i - 1.5) / 1.5 * (i === 1 || i === 2 ? -1 : 1) * a;\n        y = cy + p * p * cw;\n        ctx.beginPath();\n        ctx.moveTo(x, y - s * 1.5);\n        ctx.arc(x, y, s * 0.75, b, c, false);\n        ctx.fill();\n      }\n    }\n\n    function sleet(ctx, t, cx, cy, cw, s, color) {\n      t /= 750;\n      var a = cw * 0.1875,\n          i,\n          p,\n          x,\n          y;\n      ctx.strokeStyle = color;\n      ctx.lineWidth = s * 0.5;\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n\n      for (i = 4; i--;) {\n        p = (t + i / 4) % 1;\n        x = Math.floor(cx + (i - 1.5) / 1.5 * (i === 1 || i === 2 ? -1 : 1) * a) + 0.5;\n        y = cy + p * cw;\n        line(ctx, x, y - s * 1.5, x, y + s * 1.5);\n      }\n    }\n\n    function snow(ctx, t, cx, cy, cw, s, color) {\n      t /= 3000;\n      var a = cw * 0.16,\n          b = s * 0.75,\n          u = t * TAU * 0.7,\n          ux = Math.cos(u) * b,\n          uy = Math.sin(u) * b,\n          v = u + TAU / 3,\n          vx = Math.cos(v) * b,\n          vy = Math.sin(v) * b,\n          w = u + TAU * 2 / 3,\n          wx = Math.cos(w) * b,\n          wy = Math.sin(w) * b,\n          i,\n          p,\n          x,\n          y;\n      ctx.strokeStyle = color;\n      ctx.lineWidth = s * 0.5;\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n\n      for (i = 4; i--;) {\n        p = (t + i / 4) % 1;\n        x = cx + Math.sin((p + i / 4) * TAU) * a;\n        y = cy + p * cw;\n        line(ctx, x - ux, y - uy, x + ux, y + uy);\n        line(ctx, x - vx, y - vy, x + vx, y + vy);\n        line(ctx, x - wx, y - wy, x + wx, y + wy);\n      }\n    }\n\n    function fogbank(ctx, t, cx, cy, cw, s, color) {\n      t /= 30000;\n      var a = cw * 0.21,\n          b = cw * 0.06,\n          c = cw * 0.21,\n          d = cw * 0.28;\n      ctx.fillStyle = color;\n      puffs(ctx, t, cx, cy, a, b, c, d);\n      ctx.globalCompositeOperation = 'destination-out';\n      puffs(ctx, t, cx, cy, a, b, c - s, d - s);\n      ctx.globalCompositeOperation = 'source-over';\n    }\n    /*\n    var WIND_PATHS = [\n          downsample(63, upsample(8, [\n            -1.00, -0.28,\n            -0.75, -0.18,\n            -0.50,  0.12,\n            -0.20,  0.12,\n            -0.04, -0.04,\n            -0.07, -0.18,\n            -0.19, -0.18,\n            -0.23, -0.05,\n            -0.12,  0.11,\n             0.02,  0.16,\n             0.20,  0.15,\n             0.50,  0.07,\n             0.75,  0.18,\n             1.00,  0.28\n          ])),\n          downsample(31, upsample(16, [\n            -1.00, -0.10,\n            -0.75,  0.00,\n            -0.50,  0.10,\n            -0.25,  0.14,\n             0.00,  0.10,\n             0.25,  0.00,\n             0.50, -0.10,\n             0.75, -0.14,\n             1.00, -0.10\n          ]))\n        ];\n    */\n\n\n    var WIND_PATHS = [[-0.7500, -0.1800, -0.7219, -0.1527, -0.6971, -0.1225, -0.6739, -0.0910, -0.6516, -0.0588, -0.6298, -0.0262, -0.6083, 0.0065, -0.5868, 0.0396, -0.5643, 0.0731, -0.5372, 0.1041, -0.5033, 0.1259, -0.4662, 0.1406, -0.4275, 0.1493, -0.3881, 0.1530, -0.3487, 0.1526, -0.3095, 0.1488, -0.2708, 0.1421, -0.2319, 0.1342, -0.1943, 0.1217, -0.1600, 0.1025, -0.1290, 0.0785, -0.1012, 0.0509, -0.0764, 0.0206, -0.0547, -0.0120, -0.0378, -0.0472, -0.0324, -0.0857, -0.0389, -0.1241, -0.0546, -0.1599, -0.0814, -0.1876, -0.1193, -0.1964, -0.1582, -0.1935, -0.1931, -0.1769, -0.2157, -0.1453, -0.2290, -0.1085, -0.2327, -0.0697, -0.2240, -0.0317, -0.2064, 0.0033, -0.1853, 0.0362, -0.1613, 0.0672, -0.1350, 0.0961, -0.1051, 0.1213, -0.0706, 0.1397, -0.0332, 0.1512, 0.0053, 0.1580, 0.0442, 0.1624, 0.0833, 0.1636, 0.1224, 0.1615, 0.1613, 0.1565, 0.1999, 0.1500, 0.2378, 0.1402, 0.2749, 0.1279, 0.3118, 0.1147, 0.3487, 0.1015, 0.3858, 0.0892, 0.4236, 0.0787, 0.4621, 0.0715, 0.5012, 0.0702, 0.5398, 0.0766, 0.5768, 0.0890, 0.6123, 0.1055, 0.6466, 0.1244, 0.6805, 0.1440, 0.7147, 0.1630, 0.7500, 0.1800], [-0.7500, 0.0000, -0.7033, 0.0195, -0.6569, 0.0399, -0.6104, 0.0600, -0.5634, 0.0789, -0.5155, 0.0954, -0.4667, 0.1089, -0.4174, 0.1206, -0.3676, 0.1299, -0.3174, 0.1365, -0.2669, 0.1398, -0.2162, 0.1391, -0.1658, 0.1347, -0.1157, 0.1271, -0.0661, 0.1169, -0.0170, 0.1046, 0.0316, 0.0903, 0.0791, 0.0728, 0.1259, 0.0534, 0.1723, 0.0331, 0.2188, 0.0129, 0.2656, -0.0064, 0.3122, -0.0263, 0.3586, -0.0466, 0.4052, -0.0665, 0.4525, -0.0847, 0.5007, -0.1002, 0.5497, -0.1130, 0.5991, -0.1240, 0.6491, -0.1325, 0.6994, -0.1380, 0.7500, -0.1400]],\n        WIND_OFFSETS = [{\n      start: 0.36,\n      end: 0.11\n    }, {\n      start: 0.56,\n      end: 0.16\n    }];\n\n    function leaf(ctx, t, x, y, cw, s, color) {\n      var a = cw / 8,\n          b = a / 3,\n          c = 2 * b,\n          d = t % 1 * TAU,\n          e = Math.cos(d),\n          f = Math.sin(d);\n      ctx.fillStyle = color;\n      ctx.strokeStyle = color;\n      ctx.lineWidth = s;\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n      ctx.beginPath();\n      ctx.arc(x, y, a, d, d + Math.PI, false);\n      ctx.arc(x - b * e, y - b * f, c, d + Math.PI, d, false);\n      ctx.arc(x + c * e, y + c * f, b, d + Math.PI, d, true);\n      ctx.globalCompositeOperation = 'destination-out';\n      ctx.fill();\n      ctx.globalCompositeOperation = 'source-over';\n      ctx.stroke();\n    }\n\n    function swoosh(ctx, t, cx, cy, cw, s, index, total, color) {\n      t /= 2500;\n      var path = WIND_PATHS[index],\n          a = (t + index - WIND_OFFSETS[index].start) % total,\n          c = (t + index - WIND_OFFSETS[index].end) % total,\n          e = (t + index) % total,\n          b,\n          d,\n          f,\n          i;\n      ctx.strokeStyle = color;\n      ctx.lineWidth = s;\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n\n      if (a < 1) {\n        ctx.beginPath();\n        a *= path.length / 2 - 1;\n        b = Math.floor(a);\n        a -= b;\n        b *= 2;\n        b += 2;\n        ctx.moveTo(cx + (path[b - 2] * (1 - a) + path[b] * a) * cw, cy + (path[b - 1] * (1 - a) + path[b + 1] * a) * cw);\n\n        if (c < 1) {\n          c *= path.length / 2 - 1;\n          d = Math.floor(c);\n          c -= d;\n          d *= 2;\n          d += 2;\n\n          for (i = b; i !== d; i += 2) ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);\n\n          ctx.lineTo(cx + (path[d - 2] * (1 - c) + path[d] * c) * cw, cy + (path[d - 1] * (1 - c) + path[d + 1] * c) * cw);\n        } else for (i = b; i !== path.length; i += 2) ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);\n\n        ctx.stroke();\n      } else if (c < 1) {\n        ctx.beginPath();\n        c *= path.length / 2 - 1;\n        d = Math.floor(c);\n        c -= d;\n        d *= 2;\n        d += 2;\n        ctx.moveTo(cx + path[0] * cw, cy + path[1] * cw);\n\n        for (i = 2; i !== d; i += 2) ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);\n\n        ctx.lineTo(cx + (path[d - 2] * (1 - c) + path[d] * c) * cw, cy + (path[d - 1] * (1 - c) + path[d + 1] * c) * cw);\n        ctx.stroke();\n      }\n\n      if (e < 1) {\n        e *= path.length / 2 - 1;\n        f = Math.floor(e);\n        e -= f;\n        f *= 2;\n        f += 2;\n        leaf(ctx, t, cx + (path[f - 2] * (1 - e) + path[f] * e) * cw, cy + (path[f - 1] * (1 - e) + path[f + 1] * e) * cw, cw, s, color);\n      }\n    }\n\n    var Skycons = function (opts) {\n      this.list = [];\n      this.interval = null;\n      this.color = opts && opts.color ? opts.color : \"black\";\n      this.resizeClear = !!(opts && opts.resizeClear);\n    };\n\n    Skycons.CLEAR_DAY = function (ctx, t, color) {\n      var w = ctx.canvas.width,\n          h = ctx.canvas.height,\n          s = Math.min(w, h);\n      sun(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);\n    };\n\n    Skycons.CLEAR_NIGHT = function (ctx, t, color) {\n      var w = ctx.canvas.width,\n          h = ctx.canvas.height,\n          s = Math.min(w, h);\n      moon(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);\n    };\n\n    Skycons.PARTLY_CLOUDY_DAY = function (ctx, t, color) {\n      var w = ctx.canvas.width,\n          h = ctx.canvas.height,\n          s = Math.min(w, h);\n      sun(ctx, t, w * 0.625, h * 0.375, s * 0.75, s * STROKE, color);\n      cloud(ctx, t, w * 0.375, h * 0.625, s * 0.75, s * STROKE, color);\n    };\n\n    Skycons.PARTLY_CLOUDY_NIGHT = function (ctx, t, color) {\n      var w = ctx.canvas.width,\n          h = ctx.canvas.height,\n          s = Math.min(w, h);\n      moon(ctx, t, w * 0.667, h * 0.375, s * 0.75, s * STROKE, color);\n      cloud(ctx, t, w * 0.375, h * 0.625, s * 0.75, s * STROKE, color);\n    };\n\n    Skycons.CLOUDY = function (ctx, t, color) {\n      var w = ctx.canvas.width,\n          h = ctx.canvas.height,\n          s = Math.min(w, h);\n      cloud(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);\n    };\n\n    Skycons.RAIN = function (ctx, t, color) {\n      var w = ctx.canvas.width,\n          h = ctx.canvas.height,\n          s = Math.min(w, h);\n      rain(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n      cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n    };\n\n    Skycons.SLEET = function (ctx, t, color) {\n      var w = ctx.canvas.width,\n          h = ctx.canvas.height,\n          s = Math.min(w, h);\n      sleet(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n      cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n    };\n\n    Skycons.SNOW = function (ctx, t, color) {\n      var w = ctx.canvas.width,\n          h = ctx.canvas.height,\n          s = Math.min(w, h);\n      snow(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n      cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n    };\n\n    Skycons.WIND = function (ctx, t, color) {\n      var w = ctx.canvas.width,\n          h = ctx.canvas.height,\n          s = Math.min(w, h);\n      swoosh(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, 0, 2, color);\n      swoosh(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, 1, 2, color);\n    };\n\n    Skycons.FOG = function (ctx, t, color) {\n      var w = ctx.canvas.width,\n          h = ctx.canvas.height,\n          s = Math.min(w, h),\n          k = s * STROKE;\n      fogbank(ctx, t, w * 0.5, h * 0.32, s * 0.75, k, color);\n      t /= 5000;\n      var a = Math.cos(t * TAU) * s * 0.02,\n          b = Math.cos((t + 0.25) * TAU) * s * 0.02,\n          c = Math.cos((t + 0.50) * TAU) * s * 0.02,\n          d = Math.cos((t + 0.75) * TAU) * s * 0.02,\n          n = h * 0.936,\n          e = Math.floor(n - k * 0.5) + 0.5,\n          f = Math.floor(n - k * 2.5) + 0.5;\n      ctx.strokeStyle = color;\n      ctx.lineWidth = k;\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n      line(ctx, a + w * 0.2 + k * 0.5, e, b + w * 0.8 - k * 0.5, e);\n      line(ctx, c + w * 0.2 + k * 0.5, f, d + w * 0.8 - k * 0.5, f);\n    };\n\n    Skycons.prototype = {\n      _determineDrawingFunction: function (draw) {\n        if (typeof draw === \"string\") draw = Skycons[draw.toUpperCase().replace(/-/g, \"_\")] || null;\n        return draw;\n      },\n      add: function (el, draw) {\n        var obj;\n        if (typeof el === \"string\") el = document.getElementById(el); // Does nothing if canvas name doesn't exists\n\n        if (el === null || el === undefined) return;\n        draw = this._determineDrawingFunction(draw); // Does nothing if the draw function isn't actually a function\n\n        if (typeof draw !== \"function\") return;\n        obj = {\n          element: el,\n          context: el.getContext(\"2d\"),\n          drawing: draw\n        };\n        this.list.push(obj);\n        this.draw(obj, KEYFRAME);\n      },\n      set: function (el, draw) {\n        var i;\n        if (typeof el === \"string\") el = document.getElementById(el);\n\n        for (i = this.list.length; i--;) if (this.list[i].element === el) {\n          this.list[i].drawing = this._determineDrawingFunction(draw);\n          this.draw(this.list[i], KEYFRAME);\n          return;\n        }\n\n        this.add(el, draw);\n      },\n      remove: function (el) {\n        var i;\n        if (typeof el === \"string\") el = document.getElementById(el);\n\n        for (i = this.list.length; i--;) if (this.list[i].element === el) {\n          this.list.splice(i, 1);\n          return;\n        }\n      },\n      draw: function (obj, time) {\n        var canvas = obj.context.canvas;\n        if (this.resizeClear) canvas.width = canvas.width;else obj.context.clearRect(0, 0, canvas.width, canvas.height);\n        obj.drawing(obj.context, time, this.color);\n      },\n      play: function () {\n        var self = this;\n        this.pause();\n        this.interval = requestInterval(function () {\n          var now = Date.now(),\n              i;\n\n          for (i = self.list.length; i--;) self.draw(self.list[i], now);\n        }, 1000 / 60);\n      },\n      pause: function () {\n        if (this.interval) {\n          cancelInterval(this.interval);\n          this.interval = null;\n        }\n      }\n    };\n    global.Skycons = Skycons;\n  })(this);\n}","map":{"version":3,"sources":["/home/jeffrey/Weather-App/src/skycons.js"],"names":["Skycons","global","requestInterval","cancelInterval","raf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","caf","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","fn","handle","value","loop","setInterval","clearInterval","KEYFRAME","STROKE","TAU","Math","PI","TWO_OVER_SQRT_2","sqrt","circle","ctx","x","y","r","beginPath","arc","fill","line","ax","ay","bx","by","moveTo","lineTo","stroke","puff","t","cx","cy","rx","ry","rmin","rmax","c","cos","s","sin","puffs","i","cloud","cw","color","a","b","d","fillStyle","globalCompositeOperation","sun","p","strokeStyle","lineWidth","lineCap","lineJoin","moon","closePath","rain","sleet","floor","snow","u","ux","uy","v","vx","vy","w","wx","wy","fogbank","WIND_PATHS","WIND_OFFSETS","start","end","leaf","e","f","swoosh","index","total","path","length","opts","list","interval","resizeClear","CLEAR_DAY","canvas","width","h","height","min","CLEAR_NIGHT","PARTLY_CLOUDY_DAY","PARTLY_CLOUDY_NIGHT","CLOUDY","RAIN","SLEET","SNOW","WIND","FOG","k","n","prototype","_determineDrawingFunction","draw","toUpperCase","replace","add","el","obj","document","getElementById","undefined","element","context","getContext","drawing","push","set","remove","splice","time","clearRect","play","self","pause","now","Date"],"mappings":"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","sourcesContent":["\nfunction Skycons() {\n(function(global) {\n  \"use strict\";\n\n  /* Set up a RequestAnimationFrame shim so we can animate efficiently FOR\n   * GREAT JUSTICE. */\n  var requestInterval, cancelInterval;\n\n  (function() {\n    var raf = global.requestAnimationFrame       ||\n              global.webkitRequestAnimationFrame ||\n              global.mozRequestAnimationFrame    ||\n              global.oRequestAnimationFrame      ||\n              global.msRequestAnimationFrame     ,\n        caf = global.cancelAnimationFrame        ||\n              global.webkitCancelAnimationFrame  ||\n              global.mozCancelAnimationFrame     ||\n              global.oCancelAnimationFrame       ||\n              global.msCancelAnimationFrame      ;\n\n    if(raf && caf) {\n      requestInterval = function(fn) {\n        var handle = {value: null};\n\n        function loop() {\n          handle.value = raf(loop);\n          fn();\n        }\n\n        loop();\n        return handle;\n      };\n\n      cancelInterval = function(handle) {\n        caf(handle.value);\n      };\n    }\n\n    else {\n      requestInterval = setInterval;\n      cancelInterval = clearInterval;\n    }\n  }());\n\n  /* Catmull-rom spline stuffs. */\n  /*\n  function upsample(n, spline) {\n    var polyline = [],\n        len = spline.length,\n        bx  = spline[0],\n        by  = spline[1],\n        cx  = spline[2],\n        cy  = spline[3],\n        dx  = spline[4],\n        dy  = spline[5],\n        i, j, ax, ay, px, qx, rx, sx, py, qy, ry, sy, t;\n\n    for(i = 6; i !== spline.length; i += 2) {\n      ax = bx;\n      bx = cx;\n      cx = dx;\n      dx = spline[i    ];\n      px = -0.5 * ax + 1.5 * bx - 1.5 * cx + 0.5 * dx;\n      qx =        ax - 2.5 * bx + 2.0 * cx - 0.5 * dx;\n      rx = -0.5 * ax            + 0.5 * cx           ;\n      sx =                   bx                      ;\n\n      ay = by;\n      by = cy;\n      cy = dy;\n      dy = spline[i + 1];\n      py = -0.5 * ay + 1.5 * by - 1.5 * cy + 0.5 * dy;\n      qy =        ay - 2.5 * by + 2.0 * cy - 0.5 * dy;\n      ry = -0.5 * ay            + 0.5 * cy           ;\n      sy =                   by                      ;\n\n      for(j = 0; j !== n; ++j) {\n        t = j / n;\n\n        polyline.push(\n          ((px * t + qx) * t + rx) * t + sx,\n          ((py * t + qy) * t + ry) * t + sy\n        );\n      }\n    }\n\n    polyline.push(\n      px + qx + rx + sx,\n      py + qy + ry + sy\n    );\n\n    return polyline;\n  }\n\n  function downsample(n, polyline) {\n    var len = 0,\n        i, dx, dy;\n\n    for(i = 2; i !== polyline.length; i += 2) {\n      dx = polyline[i    ] - polyline[i - 2];\n      dy = polyline[i + 1] - polyline[i - 1];\n      len += Math.sqrt(dx * dx + dy * dy);\n    }\n\n    len /= n;\n\n    var small = [],\n        target = len,\n        min = 0,\n        max, t;\n\n    small.push(polyline[0], polyline[1]);\n\n    for(i = 2; i !== polyline.length; i += 2) {\n      dx = polyline[i    ] - polyline[i - 2];\n      dy = polyline[i + 1] - polyline[i - 1];\n      max = min + Math.sqrt(dx * dx + dy * dy);\n\n      if(max > target) {\n        t = (target - min) / (max - min);\n\n        small.push(\n          polyline[i - 2] + dx * t,\n          polyline[i - 1] + dy * t\n        );\n\n        target += len;\n      }\n\n      min = max;\n    }\n\n    small.push(polyline[polyline.length - 2], polyline[polyline.length - 1]);\n\n    return small;\n  }\n  */\n\n  /* Define skycon things. */\n  /* FIXME: I'm *really really* sorry that this code is so gross. Really, I am.\n   * I'll try to clean it up eventually! Promise! */\n  var KEYFRAME = 500,\n      STROKE = 0.08,\n      TAU = 2.0 * Math.PI,\n      TWO_OVER_SQRT_2 = 2.0 / Math.sqrt(2);\n\n  function circle(ctx, x, y, r) {\n    ctx.beginPath();\n    ctx.arc(x, y, r, 0, TAU, false);\n    ctx.fill();\n  }\n\n  function line(ctx, ax, ay, bx, by) {\n    ctx.beginPath();\n    ctx.moveTo(ax, ay);\n    ctx.lineTo(bx, by);\n    ctx.stroke();\n  }\n\n  function puff(ctx, t, cx, cy, rx, ry, rmin, rmax) {\n    var c = Math.cos(t * TAU),\n        s = Math.sin(t * TAU);\n\n    rmax -= rmin;\n\n    circle(\n      ctx,\n      cx - s * rx,\n      cy + c * ry + rmax * 0.5,\n      rmin + (1 - c * 0.5) * rmax\n    );\n  }\n\n  function puffs(ctx, t, cx, cy, rx, ry, rmin, rmax) {\n    var i;\n\n    for(i = 5; i--; )\n      puff(ctx, t + i / 5, cx, cy, rx, ry, rmin, rmax);\n  }\n\n  function cloud(ctx, t, cx, cy, cw, s, color) {\n    t /= 30000;\n\n    var a = cw * 0.21,\n        b = cw * 0.12,\n        c = cw * 0.24,\n        d = cw * 0.28;\n\n    ctx.fillStyle = color;\n    puffs(ctx, t, cx, cy, a, b, c, d);\n\n    ctx.globalCompositeOperation = 'destination-out';\n    puffs(ctx, t, cx, cy, a, b, c - s, d - s);\n    ctx.globalCompositeOperation = 'source-over';\n  }\n\n  function sun(ctx, t, cx, cy, cw, s, color) {\n    t /= 120000;\n\n    var a = cw * 0.25 - s * 0.5,\n        b = cw * 0.32 + s * 0.5,\n        c = cw * 0.50 - s * 0.5,\n        i, p, cos, sin;\n\n    ctx.strokeStyle = color;\n    ctx.lineWidth = s;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n\n    ctx.beginPath();\n    ctx.arc(cx, cy, a, 0, TAU, false);\n    ctx.stroke();\n\n    for(i = 8; i--; ) {\n      p = (t + i / 8) * TAU;\n      cos = Math.cos(p);\n      sin = Math.sin(p);\n      line(ctx, cx + cos * b, cy + sin * b, cx + cos * c, cy + sin * c);\n    }\n  }\n\n  function moon(ctx, t, cx, cy, cw, s, color) {\n    t /= 15000;\n\n    var a = cw * 0.29 - s * 0.5,\n        b = cw * 0.05,\n        c = Math.cos(t * TAU),\n        p = c * TAU / -16;\n\n    ctx.strokeStyle = color;\n    ctx.lineWidth = s;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n\n    cx += c * b;\n\n    ctx.beginPath();\n    ctx.arc(cx, cy, a, p + TAU / 8, p + TAU * 7 / 8, false);\n    ctx.arc(cx + Math.cos(p) * a * TWO_OVER_SQRT_2, cy + Math.sin(p) * a * TWO_OVER_SQRT_2, a, p + TAU * 5 / 8, p + TAU * 3 / 8, true);\n    ctx.closePath();\n    ctx.stroke();\n  }\n\n  function rain(ctx, t, cx, cy, cw, s, color) {\n    t /= 1350;\n\n    var a = cw * 0.16,\n        b = TAU * 11 / 12,\n        c = TAU *  7 / 12,\n        i, p, x, y;\n\n    ctx.fillStyle = color;\n\n    for(i = 4; i--; ) {\n      p = (t + i / 4) % 1;\n      x = cx + ((i - 1.5) / 1.5) * (i === 1 || i === 2 ? -1 : 1) * a;\n      y = cy + p * p * cw;\n      ctx.beginPath();\n      ctx.moveTo(x, y - s * 1.5);\n      ctx.arc(x, y, s * 0.75, b, c, false);\n      ctx.fill();\n    }\n  }\n\n  function sleet(ctx, t, cx, cy, cw, s, color) {\n    t /= 750;\n\n    var a = cw * 0.1875,\n        i, p, x, y;\n\n    ctx.strokeStyle = color;\n    ctx.lineWidth = s * 0.5;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n\n    for(i = 4; i--; ) {\n      p = (t + i / 4) % 1;\n      x = Math.floor(cx + ((i - 1.5) / 1.5) * (i === 1 || i === 2 ? -1 : 1) * a) + 0.5;\n      y = cy + p * cw;\n      line(ctx, x, y - s * 1.5, x, y + s * 1.5);\n    }\n  }\n\n  function snow(ctx, t, cx, cy, cw, s, color) {\n    t /= 3000;\n\n    var a  = cw * 0.16,\n        b  = s * 0.75,\n        u  = t * TAU * 0.7,\n        ux = Math.cos(u) * b,\n        uy = Math.sin(u) * b,\n        v  = u + TAU / 3,\n        vx = Math.cos(v) * b,\n        vy = Math.sin(v) * b,\n        w  = u + TAU * 2 / 3,\n        wx = Math.cos(w) * b,\n        wy = Math.sin(w) * b,\n        i, p, x, y;\n\n    ctx.strokeStyle = color;\n    ctx.lineWidth = s * 0.5;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n\n    for(i = 4; i--; ) {\n      p = (t + i / 4) % 1;\n      x = cx + Math.sin((p + i / 4) * TAU) * a;\n      y = cy + p * cw;\n\n      line(ctx, x - ux, y - uy, x + ux, y + uy);\n      line(ctx, x - vx, y - vy, x + vx, y + vy);\n      line(ctx, x - wx, y - wy, x + wx, y + wy);\n    }\n  }\n\n  function fogbank(ctx, t, cx, cy, cw, s, color) {\n    t /= 30000;\n\n    var a = cw * 0.21,\n        b = cw * 0.06,\n        c = cw * 0.21,\n        d = cw * 0.28;\n\n    ctx.fillStyle = color;\n    puffs(ctx, t, cx, cy, a, b, c, d);\n\n    ctx.globalCompositeOperation = 'destination-out';\n    puffs(ctx, t, cx, cy, a, b, c - s, d - s);\n    ctx.globalCompositeOperation = 'source-over';\n  }\n\n  /*\n  var WIND_PATHS = [\n        downsample(63, upsample(8, [\n          -1.00, -0.28,\n          -0.75, -0.18,\n          -0.50,  0.12,\n          -0.20,  0.12,\n          -0.04, -0.04,\n          -0.07, -0.18,\n          -0.19, -0.18,\n          -0.23, -0.05,\n          -0.12,  0.11,\n           0.02,  0.16,\n           0.20,  0.15,\n           0.50,  0.07,\n           0.75,  0.18,\n           1.00,  0.28\n        ])),\n        downsample(31, upsample(16, [\n          -1.00, -0.10,\n          -0.75,  0.00,\n          -0.50,  0.10,\n          -0.25,  0.14,\n           0.00,  0.10,\n           0.25,  0.00,\n           0.50, -0.10,\n           0.75, -0.14,\n           1.00, -0.10\n        ]))\n      ];\n  */\n\n  var WIND_PATHS = [\n        [\n          -0.7500, -0.1800, -0.7219, -0.1527, -0.6971, -0.1225,\n          -0.6739, -0.0910, -0.6516, -0.0588, -0.6298, -0.0262,\n          -0.6083,  0.0065, -0.5868,  0.0396, -0.5643,  0.0731,\n          -0.5372,  0.1041, -0.5033,  0.1259, -0.4662,  0.1406,\n          -0.4275,  0.1493, -0.3881,  0.1530, -0.3487,  0.1526,\n          -0.3095,  0.1488, -0.2708,  0.1421, -0.2319,  0.1342,\n          -0.1943,  0.1217, -0.1600,  0.1025, -0.1290,  0.0785,\n          -0.1012,  0.0509, -0.0764,  0.0206, -0.0547, -0.0120,\n          -0.0378, -0.0472, -0.0324, -0.0857, -0.0389, -0.1241,\n          -0.0546, -0.1599, -0.0814, -0.1876, -0.1193, -0.1964,\n          -0.1582, -0.1935, -0.1931, -0.1769, -0.2157, -0.1453,\n          -0.2290, -0.1085, -0.2327, -0.0697, -0.2240, -0.0317,\n          -0.2064,  0.0033, -0.1853,  0.0362, -0.1613,  0.0672,\n          -0.1350,  0.0961, -0.1051,  0.1213, -0.0706,  0.1397,\n          -0.0332,  0.1512,  0.0053,  0.1580,  0.0442,  0.1624,\n           0.0833,  0.1636,  0.1224,  0.1615,  0.1613,  0.1565,\n           0.1999,  0.1500,  0.2378,  0.1402,  0.2749,  0.1279,\n           0.3118,  0.1147,  0.3487,  0.1015,  0.3858,  0.0892,\n           0.4236,  0.0787,  0.4621,  0.0715,  0.5012,  0.0702,\n           0.5398,  0.0766,  0.5768,  0.0890,  0.6123,  0.1055,\n           0.6466,  0.1244,  0.6805,  0.1440,  0.7147,  0.1630,\n           0.7500,  0.1800\n        ],\n        [\n          -0.7500,  0.0000, -0.7033,  0.0195, -0.6569,  0.0399,\n          -0.6104,  0.0600, -0.5634,  0.0789, -0.5155,  0.0954,\n          -0.4667,  0.1089, -0.4174,  0.1206, -0.3676,  0.1299,\n          -0.3174,  0.1365, -0.2669,  0.1398, -0.2162,  0.1391,\n          -0.1658,  0.1347, -0.1157,  0.1271, -0.0661,  0.1169,\n          -0.0170,  0.1046,  0.0316,  0.0903,  0.0791,  0.0728,\n           0.1259,  0.0534,  0.1723,  0.0331,  0.2188,  0.0129,\n           0.2656, -0.0064,  0.3122, -0.0263,  0.3586, -0.0466,\n           0.4052, -0.0665,  0.4525, -0.0847,  0.5007, -0.1002,\n           0.5497, -0.1130,  0.5991, -0.1240,  0.6491, -0.1325,\n           0.6994, -0.1380,  0.7500, -0.1400\n        ]\n      ],\n      WIND_OFFSETS = [\n        {start: 0.36, end: 0.11},\n        {start: 0.56, end: 0.16}\n      ];\n\n  function leaf(ctx, t, x, y, cw, s, color) {\n    var a = cw / 8,\n        b = a / 3,\n        c = 2 * b,\n        d = (t % 1) * TAU,\n        e = Math.cos(d),\n        f = Math.sin(d);\n\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    ctx.lineWidth = s;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n\n    ctx.beginPath();\n    ctx.arc(x        , y        , a, d          , d + Math.PI, false);\n    ctx.arc(x - b * e, y - b * f, c, d + Math.PI, d          , false);\n    ctx.arc(x + c * e, y + c * f, b, d + Math.PI, d          , true );\n    ctx.globalCompositeOperation = 'destination-out';\n    ctx.fill();\n    ctx.globalCompositeOperation = 'source-over';\n    ctx.stroke();\n  }\n\n  function swoosh(ctx, t, cx, cy, cw, s, index, total, color) {\n    t /= 2500;\n\n    var path = WIND_PATHS[index],\n        a = (t + index - WIND_OFFSETS[index].start) % total,\n        c = (t + index - WIND_OFFSETS[index].end  ) % total,\n        e = (t + index                            ) % total,\n        b, d, f, i;\n\n    ctx.strokeStyle = color;\n    ctx.lineWidth = s;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n\n    if(a < 1) {\n      ctx.beginPath();\n\n      a *= path.length / 2 - 1;\n      b  = Math.floor(a);\n      a -= b;\n      b *= 2;\n      b += 2;\n\n      ctx.moveTo(\n        cx + (path[b - 2] * (1 - a) + path[b    ] * a) * cw,\n        cy + (path[b - 1] * (1 - a) + path[b + 1] * a) * cw\n      );\n\n      if(c < 1) {\n        c *= path.length / 2 - 1;\n        d  = Math.floor(c);\n        c -= d;\n        d *= 2;\n        d += 2;\n\n        for(i = b; i !== d; i += 2)\n          ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);\n\n        ctx.lineTo(\n          cx + (path[d - 2] * (1 - c) + path[d    ] * c) * cw,\n          cy + (path[d - 1] * (1 - c) + path[d + 1] * c) * cw\n        );\n      }\n\n      else\n        for(i = b; i !== path.length; i += 2)\n          ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);\n\n      ctx.stroke();\n    }\n\n    else if(c < 1) {\n      ctx.beginPath();\n\n      c *= path.length / 2 - 1;\n      d  = Math.floor(c);\n      c -= d;\n      d *= 2;\n      d += 2;\n\n      ctx.moveTo(cx + path[0] * cw, cy + path[1] * cw);\n\n      for(i = 2; i !== d; i += 2)\n        ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);\n\n      ctx.lineTo(\n        cx + (path[d - 2] * (1 - c) + path[d    ] * c) * cw,\n        cy + (path[d - 1] * (1 - c) + path[d + 1] * c) * cw\n      );\n\n      ctx.stroke();\n    }\n\n    if(e < 1) {\n      e *= path.length / 2 - 1;\n      f  = Math.floor(e);\n      e -= f;\n      f *= 2;\n      f += 2;\n\n      leaf(\n        ctx,\n        t,\n        cx + (path[f - 2] * (1 - e) + path[f    ] * e) * cw,\n        cy + (path[f - 1] * (1 - e) + path[f + 1] * e) * cw,\n        cw,\n        s,\n        color\n      );\n    }\n  }\n\n  var Skycons = function(opts) {\n        this.list        = [];\n        this.interval    = null;\n        this.color       = opts && opts.color ? opts.color : \"black\";\n        this.resizeClear = !!(opts && opts.resizeClear);\n      };\n\n  Skycons.CLEAR_DAY = function(ctx, t, color) {\n    var w = ctx.canvas.width,\n        h = ctx.canvas.height,\n        s = Math.min(w, h);\n\n    sun(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);\n  };\n\n  Skycons.CLEAR_NIGHT = function(ctx, t, color) {\n    var w = ctx.canvas.width,\n        h = ctx.canvas.height,\n        s = Math.min(w, h);\n\n    moon(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);\n  };\n\n  Skycons.PARTLY_CLOUDY_DAY = function(ctx, t, color) {\n    var w = ctx.canvas.width,\n        h = ctx.canvas.height,\n        s = Math.min(w, h);\n\n    sun(ctx, t, w * 0.625, h * 0.375, s * 0.75, s * STROKE, color);\n    cloud(ctx, t, w * 0.375, h * 0.625, s * 0.75, s * STROKE, color);\n  };\n\n  Skycons.PARTLY_CLOUDY_NIGHT = function(ctx, t, color) {\n    var w = ctx.canvas.width,\n        h = ctx.canvas.height,\n        s = Math.min(w, h);\n\n    moon(ctx, t, w * 0.667, h * 0.375, s * 0.75, s * STROKE, color);\n    cloud(ctx, t, w * 0.375, h * 0.625, s * 0.75, s * STROKE, color);\n  };\n\n  Skycons.CLOUDY = function(ctx, t, color) {\n    var w = ctx.canvas.width,\n        h = ctx.canvas.height,\n        s = Math.min(w, h);\n\n    cloud(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);\n  };\n\n  Skycons.RAIN = function(ctx, t, color) {\n    var w = ctx.canvas.width,\n        h = ctx.canvas.height,\n        s = Math.min(w, h);\n\n    rain(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n    cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n  };\n\n  Skycons.SLEET = function(ctx, t, color) {\n    var w = ctx.canvas.width,\n        h = ctx.canvas.height,\n        s = Math.min(w, h);\n\n    sleet(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n    cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n  };\n\n  Skycons.SNOW = function(ctx, t, color) {\n    var w = ctx.canvas.width,\n        h = ctx.canvas.height,\n        s = Math.min(w, h);\n\n    snow(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n    cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);\n  };\n\n  Skycons.WIND = function(ctx, t, color) {\n    var w = ctx.canvas.width,\n        h = ctx.canvas.height,\n        s = Math.min(w, h);\n\n    swoosh(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, 0, 2, color);\n    swoosh(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, 1, 2, color);\n  };\n\n  Skycons.FOG = function(ctx, t, color) {\n    var w = ctx.canvas.width,\n        h = ctx.canvas.height,\n        s = Math.min(w, h),\n        k = s * STROKE;\n\n    fogbank(ctx, t, w * 0.5, h * 0.32, s * 0.75, k, color);\n\n    t /= 5000;\n\n    var a = Math.cos((t       ) * TAU) * s * 0.02,\n        b = Math.cos((t + 0.25) * TAU) * s * 0.02,\n        c = Math.cos((t + 0.50) * TAU) * s * 0.02,\n        d = Math.cos((t + 0.75) * TAU) * s * 0.02,\n        n = h * 0.936,\n        e = Math.floor(n - k * 0.5) + 0.5,\n        f = Math.floor(n - k * 2.5) + 0.5;\n\n    ctx.strokeStyle = color;\n    ctx.lineWidth = k;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n\n    line(ctx, a + w * 0.2 + k * 0.5, e, b + w * 0.8 - k * 0.5, e);\n    line(ctx, c + w * 0.2 + k * 0.5, f, d + w * 0.8 - k * 0.5, f);\n  };\n\n  Skycons.prototype = {\n    _determineDrawingFunction: function(draw) {\n      if(typeof draw === \"string\")\n        draw = Skycons[draw.toUpperCase().replace(/-/g, \"_\")] || null;\n\n      return draw;\n    },\n    add: function(el, draw) {\n      var obj;\n\n      if(typeof el === \"string\")\n        el = document.getElementById(el);\n\n      // Does nothing if canvas name doesn't exists\n      if(el === null || el === undefined)\n        return;\n\n      draw = this._determineDrawingFunction(draw);\n\n      // Does nothing if the draw function isn't actually a function\n      if(typeof draw !== \"function\")\n        return;\n\n      obj = {\n        element: el,\n        context: el.getContext(\"2d\"),\n        drawing: draw\n      };\n\n      this.list.push(obj);\n      this.draw(obj, KEYFRAME);\n    },\n    set: function(el, draw) {\n      var i;\n\n      if(typeof el === \"string\")\n        el = document.getElementById(el);\n\n      for(i = this.list.length; i--; )\n        if(this.list[i].element === el) {\n          this.list[i].drawing = this._determineDrawingFunction(draw);\n          this.draw(this.list[i], KEYFRAME);\n          return;\n        }\n\n      this.add(el, draw);\n    },\n    remove: function(el) {\n      var i;\n\n      if(typeof el === \"string\")\n        el = document.getElementById(el);\n\n      for(i = this.list.length; i--; )\n        if(this.list[i].element === el) {\n          this.list.splice(i, 1);\n          return;\n        }\n    },\n    draw: function(obj, time) {\n      var canvas = obj.context.canvas;\n\n      if(this.resizeClear)\n        canvas.width = canvas.width;\n\n      else\n        obj.context.clearRect(0, 0, canvas.width, canvas.height);\n\n      obj.drawing(obj.context, time, this.color);\n    },\n    play: function() {\n      var self = this;\n\n      this.pause();\n      this.interval = requestInterval(function() {\n        var now = Date.now(),\n            i;\n\n        for(i = self.list.length; i--; )\n          self.draw(self.list[i], now);\n      }, 1000 / 60);\n    },\n    pause: function() {\n      if(this.interval) {\n        cancelInterval(this.interval);\n        this.interval = null;\n      }\n    }\n  };\n\n  global.Skycons = Skycons;\n}(this));\n\n}"]},"metadata":{},"sourceType":"module"}